<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>í•œê¸€ â†” ê±´ì–´ (ê±´ì•„ ì–¸ì–´ë¼ëŠ” ëœ») ë³€í™˜ê¸°</title>
  <style>
    body {
      font-family: sans-serif;
      background: #f5f5f5;
      padding: 30px;
    }

    h2 {
      margin-bottom: 10px;
    }

    textarea {
      width: 100%;
      height: 120px;
      font-size: 16px;
      padding: 10px;
      box-sizing: border-box;
    }

    button {
      margin-top: 10px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }

    .output {
      margin-top: 20px;
      background: white;
      padding: 15px;
      min-height: 80px;
      white-space: pre-wrap;
      border: 1px solid #ccc;
    }

    hr {
      margin: 40px 0;
    }
  </style>
</head>
<body>

  <!-- í•œê¸€ â†’ ì•”í˜¸ -->
  <h2>í•œê¸€ â†’ ê±´ì–´ (ê±´ì•„ ì–¸ì–´ë¼ëŠ” ëœ»)</h2>

  <textarea id="inputText" placeholder="ê±´ì–´ë¡œ ë³€í™˜í•  í•œêµ­ì–´ë¥¼ ì ì–´ë³´ì„¸ìš”! (ë„ì–´ì“°ê¸° ë“± ë‹¤ë¥¸ ê¸€ìëŠ” ì¸ì‹í•˜ì§€ ëª»í•©ë‹ˆë‹¤.)"></textarea>
  <br>
  <button onclick="runEncrypt()">ë³€í™˜</button>

  <div class="output" id="outputText"></div>

  <hr>

  <!-- ì•”í˜¸ â†’ í•œê¸€ -->
  <h2>ê±´ì–´ (ê±´ì•„ ì–¸ì–´ë¼ëŠ” ëœ») â†’ í•œê¸€</h2>

  <textarea id="cipherInput" placeholder="ì±„íŒ…ë°©ì— ì¹œêµ¬ê°€ ë¿Œë¦° ê±´ì–´ë¥¼ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”!"></textarea>
  <br>
  <button onclick="runDecrypt()">ë³€í™˜</button>

  <div class="output" id="decryptOutput"></div>

  <script>
    const baseHangulStart = 0xAC00; // ê°€
    const baseHangulEnd   = 0xD7A3; // í£

    const jamoStart = 0x3131; // ã„±
    const jamoEnd   = 0x3163; // ã…£

    const jamoOffset = 1421;

    // ğŸ”¥ 7ì§„ë²• ë§¤í•‘
    const digitMap = ["ê¹€", "ê±´", "ê¸", "ë¹Œ", "ê¹‹", "íˆ", "í•˜", "ì•Œ"];

    const reverseDigitMap = {
      "ê¹€": "0",
      "ê±´": "1",
      "ê¸": "2",
      "ë¹Œ": "3",
      "ê¹‹": "4",
      "íˆ": "5",
      "í•˜": "6"
      "ì•Œ": "7"
    };

    function encryptHangul(input) {
      let result = [];

      for (let ch of input) {
        const code = ch.charCodeAt(0);
        let number = null;

        if (code >= baseHangulStart && code <= baseHangulEnd) {
          number = code - baseHangulStart;
        } else if (code >= jamoStart && code <= jamoEnd) {
          number = code - jamoOffset;
        } else {
          continue;
        }

        // ğŸ”¥ 7ì§„ë²• ë³€í™˜
        let base8 = number.toString(8);
        let encoded = "";

        for (let digit of base8) {
          encoded += digitMap[Number(digit)];
        }

        result.push(encoded);
      }

      return result.join(" ");
    }

    function decryptCipher(input) {
      let parts = input.trim().split(/\s+/);
      let result = "";

      for (let part of parts) {
        let base8 = "";

        for (let ch of part) {
          if (!(ch in reverseDigitMap)) {
            base8 = null;
            break;
          }
          base8 += reverseDigitMap[ch];
        }

        if (base8 === null) continue;

        // ğŸ”¥ 7ì§„ë²• ë³µì›
        let number = parseInt(base8, 8);

        if (number >= 0 && number <= 11171) {
          result += String.fromCharCode(number + baseHangulStart);
        } else if (number >= 11172 && number <= 11222) {
          result += String.fromCharCode(number + jamoOffset);
        }
      }

      return result;
    }

    function runEncrypt() {
      const input = document.getElementById("inputText").value;
      document.getElementById("outputText").innerText = encryptHangul(input);
    }

    function runDecrypt() {
      const input = document.getElementById("cipherInput").value;
      document.getElementById("decryptOutput").innerText = decryptCipher(input);
    }
  </script>

</body>
</html>

